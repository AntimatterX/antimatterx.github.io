/*! CmdExt v2.0.3 | (c) AntimatterX | https://opensource.org/licenses/MIT */
!function t(e,r){"use strict";var n={libKey:[],conflict:{},fn:{noConflict:function(){for(var t=0;t<n.libKey.length;t++){var r=n.libKey[t];r in n.conflict&&(e[r]=n.conflict[r])}return n.conflict},getType:function(t){return Object.prototype.toString.call(t).slice(8,-1)},isType:function(t,e){var r=n.fn.getType(t);switch(n.fn.getType(e)){case"String":return r===e;case"RegExp":return e.test(r);case"Array":return e.indexOf(r)>-1;default:return!1}},castType:function(t,e,r){return n.fn.isType(t,n.fn.isType(r,"RegExp")?r:[n.fn.getType(e)].concat(n.fn.isType(r,"Array")?r:"string"==typeof r?[r]:[]))?t:e},castParam:function(t,e,r){t=n.fn.castType(t,{}),e=n.fn.castType(e,{});var o=Object.keys(e);r=function(){switch(n.fn.getType(r)){case"String":case"RegExp":case"Array":for(var t={},e=0;e<o.length;e++)t[o[e]]=r;return t;default:return n.fn.castType(r,{})}}();for(var a=function(){for(var e={},r=Object.keys(t),n=0;n<r.length;n++)e[r[n]]=t[r[n]];return e}(),s=0;s<o.length;s++){var i=o[s];a[i]=i in t?n.fn.castType(t[i],e[i],n.fn.castType(r[i],[],["String","RegExp"])):e[i]}return a}}},o={key:"CmdExt",val:function(){function t(e){if(!(this instanceof t))return new t(e);e=t._castParam(e,{separator:"",quots:[],commands:{},caseInsensitive:!1},{quots:"String"}),this.separator=/^\S+$/.test(e.separator)?e.separator:".",this.quots=t._initQuots(e.quots),this.commands=e.commands,this.caseInsensitive=e.caseInsensitive,this._handlers={commanderror:[],commandnotfound:[],disabledcommand:[]}}var e;return t.prototype._getType=t._getType=n.fn.getType,t.prototype._isType=t._isType=n.fn.isType,t.prototype._castType=t._castType=n.fn.castType,t.prototype._castParam=t._castParam=n.fn.castParam,t.prototype._escapeRegExp=t._escapeRegExp=function(t){return("string"==typeof t?t:"").replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")},t.prototype._initQuots=t._initQuots=function(e){return(t._isType(e,"Array")?e.concat(Array.prototype.slice.call(arguments,1)):Array.prototype.slice.call(arguments)).slice().filter(function(t,e,r){return r.indexOf(t)===e&&"string"==typeof t&&/^\S+$/.test(t)}).map(function(e){return t._escapeRegExp(e)}).sort(function(t,e){return e.length-t.length})},t.prototype.noConflict=t.noConflict=function(){return n.fn.noConflict(),o.val},t.parseArg=function(e,r){var n="string"==typeof e&&e.length>0?e.split("").reverse().join(""):"",o="(?:("+t._initQuots.apply(null,Array.prototype.slice.call(arguments,1)).join("|")+")(?!\\\\))",a=[];if("(?:()(?!\\\\))"!==o&&new RegExp(o).test(n))for(var s,i=new RegExp("(?:^|\\s+)"+o+"[\\s\\S]*?\\1(?:$|\\s+)|\\S+","g");null!==(s=i.exec(n));)a.push(s[0].trim());else a=n.match(/\S+/g)||[];return a.reverse().map(function(t){return t.replace(new RegExp("^"+o+"([\\s\\S]*?)\\1$"),"$2").replace(/([^\\]+)\\/g,"$1").split("").reverse().join("")})},t.prototype.version=t.version="2.0.3",t.prototype.conflict=t.conflict=n.conflict,t.prototype.errors=t.errors=((e={}).CommandError=function(){function t(e){if(!(this instanceof t))return new t(e);var r=new Error(e);return r.name="CommandError",Object.setPrototypeOf(r,Object.getPrototypeOf(this)),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(r,t),r}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(t,Error),t}(),e.CommandNotFound=function(){function t(r){if(!(this instanceof t))return new t(r);var n=new e.CommandError(r);return n.name="CommandNotFound",Object.setPrototypeOf(n,Object.getPrototypeOf(this)),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(n,t),n}return t.prototype=Object.create(e.CommandError.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(t,e.CommandError),t}(),e.DisabledCommand=function(){function t(r){if(!(this instanceof t))return new t(r);var n=new e.CommandError(r);return n.name="DisabledCommand",Object.setPrototypeOf(n,Object.getPrototypeOf(this)),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(n,t),n}return t.prototype=Object.create(e.CommandError.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(t,e.CommandError),t}(),e),t.prototype._trigger=function(t,e){if(t in this._handlers)for(var r=0;r<this._handlers[t].length;r++)"function"==typeof this._handlers[t][r]&&this._handlers[t][r].apply(null,Array.prototype.slice.call(arguments,1));return this},t.prototype._addHandler=function(t,e){return t in this._handlers&&"function"==typeof e&&this._handlers[t].push(e),this},t.prototype._getPath=function(e){return""===e?[e]:(e="string"==typeof e?e:"").length<1?[]:this.caseInsensitive?e.replace(new RegExp(t._escapeRegExp(this.separator),"ig"),function(t){return t.toLowerCase()}).split(this.separator.toLowerCase()):e.split(this.separator)},t.prototype.parseArg=function(e){return t.parseArg(e,this.quots)},t.prototype.parseCommand=function(t){var e=(t="string"==typeof t?t:"").match(/^(\S+)(?:\s+([\s\S]*))?$/)||[];return{_matchResult:e.length>0?e:null,isCommand:this.has(e[1]||""),text:t,pathname:e[1]||"",path:this._getPath(e[1]||""),argname:e[2]||"",args:this.parseArg(e[2]||"")}},t.prototype.get=function(e){for(var n=this._getPath(e),o=this.commands,a=[],s=0;s<n.length;s++){for(var i={},c=Object.keys(o),p=0;p<c.length;p++){if(i[u=c[p]]=u,t._isType(o[u].aliases,"Array"))for(var l=0;l<o[u].aliases.length;l++)i[o[u].aliases[l]]=u}var u;if((u=i[((" "+Object.keys(i).join(" ")+" ").match(new RegExp(" ("+t._escapeRegExp(n[s])+") "),this.caseInsensitive?"i":r)||[])[1]])===r)return;var f=t._castParam(o[u],{aliases:[],callback:null,subcommands:null,enabled:!1},{callback:"Function",subcommands:"Object"});f.commandName=u,f.parent=a[s-1]||null,f.raw={parent:((f.parent||{}).raw||{}).command||null,command:o[u]},f.enabled="function"==typeof o[u].callback&&"boolean"==typeof o[u].enabled?o[u].enabled:"function"==typeof o[u].callback,a.push(f),t._isType(o[u].subcommands,"Object")&&(o=o[u].subcommands)}return a.pop()},t.prototype.set=function(e,n){var o=this._getPath(e);if(o.length>0){for(var a=0;a<o.length;a++){var s=o.slice(0,a),i=this.get(o.slice(0,a+1).join(this.separator)),c=((this.get(s.join(this.separator))||{}).raw||{}).command||this.commands;if(i===r){c===this.commands||t._isType(c.subcommands,"Object")||(c.subcommands={});var p=c===this.commands?c:c.subcommands;p[o[a]]={},o[a+1]!==r&&(p[o[a]].subcommands={})}}n=t._castType(n,{});var l=this.get(e).raw.command,u=Object.keys(n);for(a=0;a<u.length;a++)l[u[a]]=n[u[a]]}return this},t.prototype.delete=function(t){var e=this.get(t);return e!==r&&delete((((e.parent||{}).raw||{}).command||{}).subcommands||this.commands)[e.commandName]},t.prototype.has=function(t){return this.get(t)!==r},t.prototype.exec=function(e){var n=this.parseCommand(e),o=this.get(n.pathname),a={cmdext:this,text:e,args:n.args,error:o===r?new t.errors.CommandNotFound("Command '"+n.pathname+"' is not found"):o.enabled?null:new t.errors.DisabledCommand("Command '"+n.pathname+"' is disabled"),failed:o===r||o!==r&&!o.enabled,parseData:n,command:o};if(a.failed&&this._trigger("commanderror",a),o!==r&&o.enabled)o.callback.apply(null,a,n.args);else{if(this._handlers.commanderror.length<1&&(o===r&&this._handlers.commandnotfound.length<1||!o.enabled&&this._handlers.disabledcommand.length<1))throw err;this._trigger(o===r?"commandnotfound":"disabledcommand",a)}return this},t.prototype.on=function(e,r){switch(t._getType(e)){case"String":for(var n=e.match(/\S+/g)||[],o=0;o<n.length;o++)this._addHandler(n[o],r);break;case"Object":var a=Object.keys(e);for(o=0;o<a.length;o++)this._addHandler(a[o],e[a[o]])}return this},t}()};if(n.libKey=n.fn.castType(o.key,[o.key]),"object"==typeof module&&"object"==typeof module.exports&&null!==module.exports)module.exports=o.val;else for(var a=0;a<n.libKey.length;a++){var s=n.libKey[a];s in e&&(n.conflict[s]=e[s]),e[s]=o.val}return{_root:e,undefined:r,_main:t,_ctx:n,_lib:o}}("object"==typeof window?window:this);
