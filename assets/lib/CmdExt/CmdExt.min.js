/*! CmdExt v2.0.5 | (c) AntimatterX | https://opensource.org/licenses/MIT */
!function t(e,r){"use strict";var n={libKey:[],conflict:{},fn:{noConflict:function(){for(var t=0;t<n.libKey.length;t++){var r=n.libKey[t];r in n.conflict&&(e[r]=n.conflict[r])}return n.conflict},getType:function(t){return Object.prototype.toString.call(t).slice(8,-1)},isType:function(t,e){var r=n.fn.getType(t);switch(n.fn.getType(e)){case"String":return r===e;case"RegExp":return e.test(r);case"Array":return e.indexOf(r)>-1;default:return!1}},castType:function(t,e,r){return n.fn.isType(t,n.fn.isType(r,"RegExp")?r:[n.fn.getType(e)].concat(n.fn.isType(r,"Array")?r:"string"==typeof r?[r]:[]))?t:e},castParam:function(t,e,r){t=n.fn.castType(t,{}),e=n.fn.castType(e,{});var o=Object.keys(e);r=function(){switch(n.fn.getType(r)){case"String":case"RegExp":case"Array":for(var t={},e=0;e<o.length;e++)t[o[e]]=r;return t;default:return n.fn.castType(r,{})}}();for(var a=function(){for(var e={},r=Object.keys(t),n=0;n<r.length;n++)e[r[n]]=t[r[n]];return e}(),s=0;s<o.length;s++){var c=o[s];a[c]=c in t?n.fn.castType(t[c],e[c],n.fn.castType(r[c],[],["String","RegExp"])):e[c]}return a}}},o={key:"CmdExt",val:function(){function t(e){if(!(this instanceof t))return new t(e);e=t._castParam(e,{separator:"",converter:null,quots:[],commands:{},caseInsensitive:!1},{converter:["Function","Boolean"],quots:"String"}),this.separator=/^\S+$/.test(e.separator)?e.separator:".",this.converter="function"==typeof e.converter?e.converter:e.converter?function(t){var e=Number(t);return e!=e&&"number"==typeof e?t:e}:null,this.quots=t._initQuots(e.quots),this.commands=t._cloneObject(e.commands),this.caseInsensitive=e.caseInsensitive,this._handlers={commanderror:[],commandnotfound:[],disabledcommand:[]}}var e;return t._getType=t.prototype._getType=n.fn.getType,t._isType=t.prototype._isType=n.fn.isType,t._castType=t.prototype._castType=n.fn.castType,t._castParam=t.prototype._castParam=n.fn.castParam,t._cloneObject=t.prototype._cloneObject=function(e){var r=[];return function e(n){if(-1!==r.indexOf(n))return n;switch(t._getType(n)){case"Object":r.push(n);for(var o={},a=Object.keys(n),s=0;s<a.length;s++)o[a[s]]=e(n[a[s]]);return r.pop(),o;case"Array":r.push(n);var c=[];for(s=0;s<n.length;s++)c.push(e(n[s]));return r.pop(),c;default:return n}}(e)},t._escapeRegExp=t.prototype._escapeRegExp=function(t){return("string"==typeof t?t:"").replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")},t._initQuots=t.prototype._initQuots=function(e){return(t._isType(e,"Array")?e.concat(Array.prototype.slice.call(arguments,1)):Array.prototype.slice.call(arguments)).slice().filter(function(t,e,r){return r.indexOf(t)===e&&"string"==typeof t&&/^\S+$/.test(t)}).map(function(e){return t._escapeRegExp(e)}).sort(function(t,e){return e.length-t.length})},t.noConflict=t.prototype.noConflict=function(){return n.fn.noConflict(),o.val},t.parseArg=function(e,r){var n="string"==typeof e&&e.length>0?e.split("").reverse().join(""):"",o="(?:("+t._initQuots.apply(null,Array.prototype.slice.call(arguments,1)).join("|")+")(?!\\\\))",a=[];if("(?:()(?!\\\\))"!==o&&new RegExp(o).test(n))for(var s,c=new RegExp("(?:^|\\s+)"+o+"[\\s\\S]*?\\1(?:$|\\s+)|\\S+","g");null!==(s=c.exec(n));)a.push(s[0].trim());else a=n.match(/\S+/g)||[];return a.reverse().map(function(t){return t.replace(new RegExp("^"+o+"([\\s\\S]*?)\\1$"),"$2").replace(/([^\\]+)\\/g,"$1").split("").reverse().join("")})},t.version=t.prototype.version="2.0.5",t.conflict=t.prototype.conflict=n.conflict,t.errors=t.prototype.errors=((e={}).CommandError=function(){function t(e){if(!(this instanceof t))return new t(e);var r=new Error(e);r.name="CommandError";var n="function"==typeof Object.getPrototypeOf?Object.getPrototypeOf(this):this.__proto__;return"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(r,t),r}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(t,Error):t.__proto__=Error,t}(),e.CommandNotFound=function(){function t(e){if(!(this instanceof t))return new t(e);var r=new Error(e);r.name="CommandNotFound";var n="function"==typeof Object.getPrototypeOf?Object.getPrototypeOf(this):this.__proto__;return"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(r,t),r}return t.prototype=Object.create(e.CommandError.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(t,e.CommandError):t.__proto__=e.CommandError,t}(),e.DisabledCommand=function(){function t(e){if(!(this instanceof t))return new t(e);var r=new Error(e);r.name="DisabledCommand";var n="function"==typeof Object.getPrototypeOf?Object.getPrototypeOf(this):this.__proto__;return"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(r,t),r}return t.prototype=Object.create(e.CommandError.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(t,e.CommandError):t.__proto__=e.CommandError,t}(),e),t.prototype._Context=function(){return function e(n,o){if(!(this instanceof e))return new e(n,o);var a=n.parseCommand(o),s=n.get(a.pathname);this.cmdext=n,this.text=o,this.args=a.args,this.error=s===r?new t.errors.CommandNotFound("Command '"+a.pathname+"' is not found"):s.enabled?null:new t.errors.DisabledCommand("Command '"+a.pathname+"' is disabled"),this.failed=s===r||!s.enabled,this.parseData=a,this.command=s}}(),t.prototype._getPath=function(e){return""===e?[e]:(e="string"==typeof e?e:"").length<1?[]:this.caseInsensitive?e.replace(new RegExp(t._escapeRegExp(this.separator),"ig"),function(t){return t.toLowerCase()}).split(this.separator.toLowerCase()):e.split(this.separator)},t.prototype.parseArg=function(e,r){return t.parseArg(e,arguments.length>1?Array.prototype.slice.call(arguments,1):this.quots)},t.prototype.parseCommand=function(t){var e=(t="string"==typeof t?t:"").match(/^(\S*)(?:\s+([\s\S]*))?$/)||[];return{_matchResult:e.length>0?e:null,existsCommand:this.has(e[1]||""),isCommand:e.length>0,text:t,pathname:e[1]||"",path:this._getPath(e[1]||""),argname:e[2]||"",args:this.parseArg(e[2]||"")}},t.prototype.get=function(e){for(var n=this._getPath(e),o=this.commands,a=[],s=0;s<n.length;s++){for(var c={},i=Object.keys(o),p=0;p<i.length;p++){if(c[u=i[p]]=u,t._isType(o[u].aliases,"Array"))for(var f=0;f<o[u].aliases.length;f++)c[o[u].aliases[f]]=u}var u;if((u=c[((" "+Object.keys(c).join(" ")+" ").match(new RegExp(" ("+t._escapeRegExp(n[s])+") "),this.caseInsensitive?"i":r)||[])[1]])===r)return;var l=t._castParam(o[u],{aliases:[],callback:null,subcommands:null,enabled:!1},{callback:"Function",subcommands:"Object"});l.commandName=u,l.parent=a[s-1]||null,l.raw={parent:((l.parent||{}).raw||{}).command||null,command:o[u]},l.enabled="function"==typeof o[u].callback&&"boolean"==typeof o[u].enabled?o[u].enabled:"function"==typeof o[u].callback,a.push(l),t._isType(o[u].subcommands,"Object")&&(o=o[u].subcommands)}return a.pop()},t.prototype.set=function(e,n){var o=this._getPath(e);if(o.length>0){for(var a=0;a<o.length;a++){var s=o.slice(0,a),c=this.get(o.slice(0,a+1).join(this.separator)),i=((this.get(s.join(this.separator))||{}).raw||{}).command||this.commands;if(c===r){i===this.commands||t._isType(i.subcommands,"Object")||(i.subcommands={});var p=i===this.commands?i:i.subcommands;p[o[a]]={},o[a+1]!==r&&(p[o[a]].subcommands={})}}n=t._cloneObject(t._castType(n,{}));var f=this.get(e).raw.command,u=Object.keys(n);for(a=0;a<u.length;a++)f[u[a]]=n[u[a]]}return this},t.prototype.delete=function(t){var e=this.get(t);return e!==r&&delete((((e.parent||{}).raw||{}).command||{}).subcommands||this.commands)[e.commandName]},t.prototype.has=function(t){return this.get(t)!==r},t.prototype.exec=function(t){var e=new this._Context(this,"string"==typeof t?t:"");if(e.failed&&this.trigger("commanderror",e),e.command!==r&&e.command.enabled)e.command.callback.apply(null,[e].concat("function"==typeof this.converter?e.args.map(this.converter):e.args));else{if(this._handlers.commanderror.length<1&&(e.command===r&&this._handlers.commandnotfound.length<1||!e.command.enabled&&this._handlers.disabledcommand.length<1))throw e.error;this.trigger(e.command===r?"commandnotfound":"disabledcommand",e)}return this},t.prototype.on=function(e,r){switch(t._getType(e)){case"String":for(var n=e.match(/\S+/g)||[],o=0;o<n.length;o++)"function"==typeof r&&(e in this._handlers||(this._handlers[e]=[]),this._handlers[e].push(r));break;case"Object":var a=Object.keys(e);for(o=0;o<a.length;o++)"function"==typeof e[a[o]]&&(a[o]in this._handlers||(this._handlers[a[o]]=[]),this._handlers[a[o]].push(e[a[o]]))}return this},t.prototype.trigger=function(t,e){if(t in this._handlers)for(var r=0;r<this._handlers[t].length;r++)"function"==typeof this._handlers[t][r]&&this._handlers[t][r].apply(null,Array.prototype.slice.call(arguments,1));return this},t}()};if(n.libKey=n.fn.castType(o.key,[o.key]),"object"==typeof module&&"object"==typeof module.exports&&null!==module.exports)module.exports=o.val;else for(var a=0;a<n.libKey.length;a++){var s=n.libKey[a];s in e&&(n.conflict[s]=e[s]),e[s]=o.val}return{_root:e,undefined:r,_main:t,_ctx:n,_lib:o}}("object"==typeof window?window:this);
